

function refreshColTotal(trans, main_dr_cr){
	

	//alert(main_dr_cr);
	var elArr = document.getElementsByClassName("lineTotal");
	colTot = 0.0;
	try{
		for (i = 0; i < elArr.length; i++){	
	 	if (isNumber(elArr[i].value))
		   colTot = colTot + parseFloat(elArr[i].value);		
	  	}		
	document.getElementById("trans_rec_pay_journal_amount").value = colTot.toFixed(2)
	var currentBalance = 0.00	
	if (trans == 'pay'){
		if(main_dr_cr == 'Cr'){
	  		currentBalance = parseFloat(document.getElementById("curBalanceHid").value) + parseFloat(colTot.toFixed(2));
	  	}
	  	else{
	  		if(main_dr_cr == 'Dr'){
	  			currentBalance = parseFloat(document.getElementById("curBalanceHid").value) - parseFloat(colTot.toFixed(2));
	  		}	
	  		else{
	  			currentBalance = parseFloat(colTot.toFixed(2));
	  			main_dr_cr = 'Cr';
	  			}
	  		}
	  		
	 }	
	 
	else{
	 	if(main_dr_cr == 'Cr'){
	  		currentBalance = parseFloat(document.getElementById("curBalanceHid").value) - parseFloat(colTot.toFixed(2));
	  	}
	  	else{
	  		if(main_dr_cr == 'Dr'){
	  			currentBalance = parseFloat(document.getElementById("curBalanceHid").value) + parseFloat(colTot.toFixed(2));
	  		}	
	  		else{
	  			currentBalance = parseFloat(colTot.toFixed(2));
	  			main_dr_cr = 'Dr';
	  		}
	  	}
	  		
	 }	
	  
	
	 
	var dr_cr = main_dr_cr;
	currentBalance = currentBalance.toFixed(2);
	 if (currentBalance < 0 ){ 
      	if (main_dr_cr == "Cr"){
           dr_cr = "Dr"
         }  
       	 else{
           dr_cr = "Cr"
         }
       currentBalance = currentBalance * -1  
      }   
     else{     
      if (currentBalance == 0.00){
         dr_cr  = ""
      }
    }
	
	
	 document.getElementById("curBalance").value = currentBalance.toString()+" " +  dr_cr
	 
	}catch(err){alert(err)}
	
}
